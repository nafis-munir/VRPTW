%%% computational linear programming approach 

% velocity of one node to another 
% for self referencing node velocity is assumed to be a small
% value(0.0000001)

v = [0.0000001 17.33 15.6 10.44 13.46 14.72; 
    17.33 0.0000001 9.8 11.85 10.53 10.33;
    15.6 9.187 0.0000001 8.6 10.8 11.87;
    10.44 10.05 10.125 0.0000001 12 12.6;
    13.46 9.48 9.8 10.28 0.0000001 12.9; 
    14.72 9.3 10.68 12.65 12.9 0.0000001]

 
%% weight is assumed to be a fixed value of 200 

%E is Unit fuel consumption from node i to j 
E=zeros(6,6);

for i = 1:6
    for j = 1:6
        
        E(i,j) = .3+8*10^(-5)+(1000-j*100/v(i,j)^2);
        
    end
end

% e is earliest delivery time
e = [0 7 8 7 9 8];

% l is latest delivery time
l = [0 10 12 9 13 12];

% d is distance between node i to j 
d = [10000 13 13 8.7 11 18.4;
    13 10000 4.9 7 7.9 3.1;
    13 4.9 10000 4.3 3.6 8.9;
    8.7 6.7 5.4 10000 6 11.6;
    11 7.9 3.3 6 10000 8.6;
    18.4 3.1 8.9 11.6 8.6 10000];

% f to c means factory to customers

d_f_to_c = [10000 13 13 8.7 11 18.4];
v_f_to_c = [0.00001 17.33 15.6 10.44 13.46 14.72];

Atemp = zeros(1,6); % transporting time 

for i=1:6
    
   Atemp(i) = d_f_to_c(i) / v_f_to_c(i);
   
end 

%% Determinig Arriving Time Using Servicing Time 

A = zeros(1,6)

A(1) = Atemp(1);
        
A(2) = Atemp(2) + 0.75;
        
A(3) = Atemp(3) + 0.83;

A(4) = Atemp(4) + 0.81;
        
A(5) = Atemp(5) + 1.25;
       
A(6) = Atemp(6); 


A = A + 8 ; % assuming the mean time for starting time of the vehicle is 8
        
 
%% for transportation cost 

for i = 1:6
    for j = 1:6
        C(i,j) = E(i,j) * d(i,j) * 110 ; 
    end
end

C = C./100; % normalizing value

%% for customer satisfaction

for i = 1:6
    if e(i)>A(i) 
        S(i) = 100/6 - 0.0005 * ((e(i)-A(i))/e(i)) ; 
    if e(i) < A(i) < l(i) 
        S(i) = 100/6; 
    if l(i)>A(i) 
        S(i) = 100/6 - 0.0005 * ((A(i)-l(i))/e(i)) ; 
    end
    end
    end
end



%% for total carbon emission 

m = 2.778; 
w = 0.0066; 

for i = 1:6
    for j = 1:6 
        T(i,j) = m * E(i,j) * d(i,j) + w * 200 * d(i,j) ;
    end 
end

%% objective function in a whole

Z = C + S + T ;


%% for k=2, when there is 2 vehicle to deliver the products

Zcmp = zeros(1,90);


%----------------------for 2 to 3 split-----------------------%


%1-2-3-1 and 1-4-5-6-1
Zcmp(1)= Z(1,2)+ Z(2,3) + Z(3,1) + Z(1,4) + Z(4,5) + Z(5,6) + Z(6,1); 

%1-2-3-1 and 1-4-6-5-1
Zcmp(2)= Z(1,2)+ Z(2,3) + Z(3,1) + Z(1,4) + Z(4,6) + Z(6,5) + Z(5,1); 

%1-2-3-1 and 1-4-6-5-1
Zcmp(3)= Z(1,2)+ Z(2,3) + Z(3,1) + Z(1,4) + Z(4,6) + Z(6,5) + Z(5,1); 

%1-2-4-1 and 1-3-5-6-1
Zcmp(4)= Z(1,2)+ Z(2,4) + Z(4,1) + Z(1,3) + Z(3,5) + Z(5,6) + Z(6,1); 
 
%1-2-4-1 and 1-3-6-5-1
Zcmp(5)= Z(1,2)+ Z(2,4) + Z(4,1) + Z(1,3) + Z(3,6) + Z(6,5) + Z(5,1);
 
%1-2-4-1 and 1-5-3-6-1
Zcmp(6)= Z(1,2)+ Z(2,4) + Z(4,1) + Z(1,5) + Z(5,3) + Z(3,6) + Z(6,1);

%1-2-5-1 and 1-3-4-6-1
Zcmp(7)= Z(1,2)+ Z(2,5) + Z(5,1) + Z(1,3) + Z(3,4) + Z(4,6) + Z(6,1);
 
%1-2-5-1 and 1-3-6-4-1
Zcmp(8)= Z(1,2)+ Z(2,5) + Z(5,1) + Z(1,3) + Z(3,6) + Z(6,4) + Z(4,1); 
 
%1-2-5-1 and 1-6-3-4-1
Zcmp(9)= Z(1,2)+ Z(2,5) + Z(5,1) + Z(1,6) + Z(6,3) + Z(3,4) + Z(4,1);

%1-2-6-1 and 1-3-4-5-1
Zcmp(10)= Z(1,2)+ Z(2,6) + Z(6,1) + Z(1,3) + Z(3,4) + Z(4,5) + Z(5,1); 
 
%1-2-6-1 and 1-3-5-4-1
Zcmp(11)= Z(1,2)+ Z(2,6) + Z(6,1) + Z(1,3) + Z(3,5) + Z(5,4) + Z(4,1); 
 
%1-2-6-1 and 1-4-3-5-1
Zcmp(12)= Z(1,2)+ Z(2,6) + Z(6,1) + Z(1,4) + Z(4,3) + Z(3,5) + Z(5,1);

%1-3-4-1 and 1-2-5-6-1
Zcmp(13)= Z(1,3)+ Z(3,4) + Z(4,1) + Z(1,2) + Z(2,5) + Z(5,6) + Z(6,1); 
 
%1-3-4-1 and 1-2-6-5-1
Zcmp(14)= Z(1,3)+ Z(3,4) + Z(4,1) + Z(1,2) + Z(2,6) + Z(6,5) + Z(5,1); 
 
%1-3-4-1 and 1-6-2-5-1
Zcmp(15)= Z(1,3)+ Z(3,4) + Z(4,1) + Z(1,6) + Z(6,2) + Z(2,5) + Z(5,1);

%1-3-5-1 and 1-2-4-6-1
Zcmp(16)= Z(1,3)+ Z(3,5) + Z(5,1) + Z(1,2) + Z(2,4) + Z(4,6) + Z(6,1); 
 
%1-3-5-1 and 1-2-6-4-1
Zcmp(17)= Z(1,3)+ Z(3,5) + Z(5,1) + Z(1,2) + Z(2,6) + Z(6,4) + Z(4,1); 
 
%1-3-5-1 and 1-4-2-6-1
Zcmp(18)= Z(1,3)+ Z(3,5) + Z(5,1) + Z(1,4) + Z(4,2) + Z(2,6) + Z(6,1);

%1-3-6-1 and 1-2-4-5-1
Zcmp(19)= Z(1,3)+ Z(3,6) + Z(6,1) + Z(1,2) + Z(2,4) + Z(4,5) + Z(5,1); 
 
%1-3-6-1 and 1-2-5-4-1
Zcmp(20)= Z(1,3)+ Z(3,6) + Z(6,1) + Z(1,2) + Z(2,5) + Z(5,4) + Z(4,1);
 
%1-3-6-1 and 1-4-2-5-1
Zcmp(21)= Z(1,3)+ Z(3,6) + Z(6,1) + Z(1,4) + Z(4,2) + Z(2,5) + Z(5,1);

%1-4-5-1 and 1-2-3-6-1
Zcmp(22)= Z(1,4)+ Z(4,5) + Z(5,1) + Z(1,2) + Z(2,3) + Z(3,6) + Z(6,1);
 
%1-4-5-1 and 1-2-6-3-1
Zcmp(23)= Z(1,4)+ Z(4,5) + Z(5,1) + Z(1,2) + Z(2,6) + Z(6,3) + Z(3,1); 
 
%1-4-5-1 and 1-3-2-6-1
Zcmp(24)= Z(1,4)+ Z(4,5) + Z(5,1) + Z(1,3) + Z(3,2) + Z(2,6) + Z(6,1);

%1-4-6-1 and 1-2-3-5-1
Zcmp(25)= Z(1,4)+ Z(4,6) + Z(6,1) + Z(1,2) + Z(2,3) + Z(3,5) + Z(5,1); 
 
%1-4-6-1 and 1-2-5-3-1
Zcmp(26)= Z(1,4)+ Z(4,6) + Z(6,1) + Z(1,2) + Z(2,5) + Z(5,3) + Z(3,1); 
 
%1-4-6-1 and 1-3-2-5-1
Zcmp(27)= Z(1,4)+ Z(4,6) + Z(6,1) + Z(1,3) + Z(3,2) + Z(2,5) + Z(5,1);

%1-5-6-1 and 1-2-3-4-1
Zcmp(28)= Z(1,5)+ Z(5,6) + Z(6,1) + Z(1,2) + Z(2,3) + Z(3,4) + Z(4,1); 
 
%1-5-6-1 and 1-2-4-3-1
Zcmp(29)= Z(1,5)+ Z(5,6) + Z(6,1) + Z(1,2) + Z(2,4) + Z(4,3) + Z(3,1); 
 
%1-5-6-1 and 1-3-2-4-1
Zcmp(30)= Z(1,5)+ Z(5,6) + Z(6,1) + Z(1,3) + Z(3,2) + Z(2,4) + Z(4,1);


% for 1 to 4 split 


%1-2-1 and 1-3-4-5-6-1
Zcmp(31)= Z(1,2)+ Z(2,1) + Z(1,3) + Z(3,4) + Z(4,5) + Z(5,6) + Z(6,1); 

%1-2-1 and 1-3-5-4-6-1
Zcmp(32)= Z(1,2)+ Z(2,1) + Z(1,3) + Z(3,5) + Z(5,4) + Z(4,6) + Z(6,1);

%1-2-1 and 1-4-3-5-6-1
Zcmp(33)= Z(1,2)+ Z(2,1) + Z(1,4) + Z(4,3) + Z(3,5) + Z(5,6) + Z(6,1);

%1-2-1 and 1-4-5-3-6-1
Zcmp(34)= Z(1,2)+ Z(2,1) + Z(1,4) + Z(4,5) + Z(5,3) + Z(3,6) + Z(6,1);

%1-2-1 and 1-5-3-4-6-1
Zcmp(35)= Z(1,2)+ Z(2,1) + Z(1,5) + Z(5,3) + Z(3,4) + Z(4,6) + Z(6,1);

%1-2-1 and 1-5-4-3-6-1
Zcmp(36)= Z(1,2)+ Z(2,1) + Z(1,5) + Z(5,4) + Z(4,3) + Z(3,6) + Z(6,1);

%1-2-1 and 1-3-4-6-5-1
Zcmp(37)= Z(1,2)+ Z(2,1) + Z(1,3) + Z(3,4) + Z(4,6) + Z(6,5) + Z(5,1); 

%1-2-1 and 1-3-6-4-5-1
Zcmp(38)= Z(1,2)+ Z(2,1) + Z(1,3) + Z(3,6) + Z(6,6) + Z(4,5) + Z(5,1); 

%1-2-1 and 1-4-3-6-5-1
Zcmp(39)= Z(1,2)+ Z(2,1) + Z(1,4) + Z(4,3) + Z(3,6) + Z(6,5) + Z(5,1);

%1-2-1 and 1-4-6-3-5-1
Zcmp(40)= Z(1,2)+ Z(2,1) + Z(1,4) + Z(4,6) + Z(6,3) + Z(3,5) + Z(5,1);

%1-2-1 and 1-3-5-6-4-1
Zcmp(41)= Z(1,2)+ Z(2,1) + Z(1,3) + Z(3,5) + Z(5,6) + Z(6,4) + Z(4,1);

%1-2-1 and 1-3-6-5-4-1
Zcmp(42)= Z(1,2)+ Z(2,1) + Z(1,3) + Z(3,6) + Z(6,5) + Z(5,4) + Z(4,1);

%1-3-1 and 1-2-4-5-6-1
Zcmp(43)= Z(1,3)+ Z(3,1) + Z(1,2) + Z(2,4) + Z(4,5) + Z(5,6) + Z(6,1); 

%1-3-1 and 1-2-5-4-6-1
Zcmp(44)= Z(1,3)+ Z(3,1) + Z(1,2) + Z(2,5) + Z(5,4) + Z(4,6) + Z(6,1);

%1-3-1 and 1-4-2-5-6-1
Zcmp(45)= Z(1,3)+ Z(3,1) + Z(1,4) + Z(4,2) + Z(2,5) + Z(5,6) + Z(6,1);

%1-3-1 and 1-4-5-2-6-1
Zcmp(46)= Z(1,3)+ Z(3,1) + Z(1,4) + Z(4,5) + Z(5,2) + Z(2,6) + Z(6,1);

%1-3-1 and 1-5-2-4-6-1
Zcmp(47)= Z(1,3)+ Z(3,1) + Z(1,5) + Z(5,2) + Z(2,4) + Z(4,6) + Z(6,1);

%1-3-1 and 1-5-4-2-6-1
Zcmp(48)= Z(1,3)+ Z(3,1) + Z(1,5) + Z(5,4) + Z(4,2) + Z(2,6) + Z(6,1);

%1-3-1 and 1-2-4-6-5-1
Zcmp(49)= Z(1,3)+ Z(3,1) + Z(1,2) + Z(2,4) + Z(4,6) + Z(6,5) + Z(5,1); 

%1-3-1 and 1-2-6-4-5-1
Zcmp(50)= Z(1,3)+ Z(3,1) + Z(1,2) + Z(2,6) + Z(6,4) + Z(4,5) + Z(5,1); 

%1-3-1 and 1-4-2-6-5-1
Zcmp(51)= Z(1,3)+ Z(3,1) + Z(1,4) + Z(4,2) + Z(2,6) + Z(6,5) + Z(5,1);

%1-3-1 and 1-4-6-2-5-1
Zcmp(52)= Z(1,3)+ Z(3,1) + Z(1,4) + Z(4,6) + Z(6,2) + Z(2,5) + Z(5,1);

%1-3-1 and 1-2-5-6-4-1
Zcmp(53)= Z(1,3)+ Z(3,1) + Z(1,2) + Z(2,5) + Z(5,6) + Z(6,4) + Z(4,1);

%1-3-1 and 1-2-6-5-4-1
Zcmp(54)= Z(1,3)+ Z(3,1) + Z(1,2) + Z(2,6) + Z(6,5) + Z(5,4) + Z(4,1);

%1-4-1 and 1-2-3-5-6-1
Zcmp(55)= Z(1,4)+ Z(4,1) + Z(1,2) + Z(2,3) + Z(3,5) + Z(5,6) + Z(6,1); 
 
%1-4-1 and 1-2-5-3-6-1
Zcmp(56)= Z(1,4)+ Z(4,1) + Z(1,2) + Z(2,5) + Z(5,3) + Z(3,6) + Z(6,1); 
 
%1-4-1 and 1-3-2-5-6-1
Zcmp(57)= Z(1,4)+ Z(4,1) + Z(1,3) + Z(3,2) + Z(2,5) + Z(5,6) + Z(6,1);
 
%1-4-1 and 1-3-5-2-6-1
Zcmp(58)= Z(1,4)+ Z(4,1) + Z(1,3) + Z(3,5) + Z(5,2) + Z(2,6) + Z(6,1);
 
%1-4-1 and 1-5-2-3-6-1
Zcmp(59)= Z(1,4)+ Z(4,1) + Z(1,5) + Z(5,2) + Z(2,3) + Z(3,6) + Z(6,1);
 
%1-4-1 and 1-5-3-2-6-1
Zcmp(60)= Z(1,4)+ Z(4,1) + Z(1,5) + Z(5,3) + Z(3,2) + Z(2,6) + Z(6,1);
 
%1-4-1 and 1-2-3-6-5-1
Zcmp(61)= Z(1,4)+ Z(4,1) + Z(1,2) + Z(2,3) + Z(3,6) + Z(6,5) + Z(5,1); 
 
%1-4-1 and 1-2-6-3-5-1
Zcmp(62)= Z(1,4)+ Z(4,1) + Z(1,2) + Z(2,6) + Z(6,3) + Z(3,5) + Z(5,1); 
 
%1-4-1 and 1-3-2-6-5-1
Zcmp(63)= Z(1,4)+ Z(4,1) + Z(1,3) + Z(3,2) + Z(2,6) + Z(6,5) + Z(5,1);
 
%1-4-1 and 1-3-6-2-5-1
Zcmp(64)= Z(1,4)+ Z(4,1) + Z(1,3) + Z(3,6) + Z(6,2) + Z(2,5) + Z(5,1);
 
%1-4-1 and 1-2-5-6-3-1
 Zcmp(65)= Z(1,4)+ Z(4,1) + Z(1,2) + Z(2,5) + Z(5,6) + Z(6,3) + Z(3,1);
 
%1-4-1 and 1-2-6-5-3-1
 Zcmp(66)= Z(1,4)+ Z(4,1) + Z(1,2) + Z(2,6) + Z(6,5) + Z(5,3) + Z(3,1);

%1-5-1 and 1-2-3-4-6-1
 Zcmp(67)= Z(1,5)+ Z(5,1) + Z(1,2) + Z(2,3) + Z(3,4) + Z(4,6) + Z(6,1);
 
%1-5-1 and 1-2-4-3-6-1
 Zcmp(68)= Z(1,5)+ Z(5,1) + Z(1,2) + Z(2,4) + Z(4,3) + Z(3,6) + Z(6,1); 
 
%1-5-1 and 1-3-2-4-6-1
 Zcmp(69)= Z(1,5)+ Z(5,1) + Z(1,3) + Z(3,2) + Z(2,4) + Z(4,6) + Z(6,1);
 
%1-5-1 and 1-3-4-2-6-1
 Zcmp(70)= Z(1,5)+ Z(5,1) + Z(1,3) + Z(3,4) + Z(4,2) + Z(2,6) + Z(6,1);
 
%1-5-1 and 1-4-2-3-6-1
 Zcmp(71)= Z(1,5)+ Z(5,1) + Z(1,4) + Z(4,2) + Z(2,3) + Z(3,6) + Z(6,1);
 
%1-5-1 and 1-4-3-2-6-1
 Zcmp(72)= Z(1,5)+ Z(5,1) + Z(1,4) + Z(4,3) + Z(3,2) + Z(2,6) + Z(6,1);
 
%1-5-1 and 1-2-3-6-4-1
 Zcmp(73)= Z(1,5)+ Z(5,1) + Z(1,2) + Z(2,3) + Z(3,6) + Z(6,4) + Z(4,1); 
 
%1-5-1 and 1-2-6-3-4-1
 Zcmp(74)= Z(1,5)+ Z(5,1) + Z(1,2) + Z(2,6) + Z(6,3) + Z(3,4) + Z(4,1); 
 
%1-5-1 and 1-3-2-6-4-1
 Zcmp(75)= Z(1,5)+ Z(5,1) + Z(1,3) + Z(3,2) + Z(2,6) + Z(6,4) + Z(4,1);
 
%1-5-1 and 1-3-6-2-4-1
 Zcmp(76)= Z(1,5)+ Z(5,1) + Z(1,3) + Z(3,6) + Z(6,2) + Z(2,4) + Z(4,1);
 
%1-5-1 and 1-2-4-6-3-1
 Zcmp(77)= Z(1,5)+ Z(5,1) + Z(1,2) + Z(2,4) + Z(4,6) + Z(6,3) + Z(3,1);
 
%1-5-1 and 1-2-6-4-3-1
 Zcmp(78)= Z(1,5)+ Z(5,1) + Z(1,2) + Z(2,6) + Z(6,4) + Z(4,3) + Z(3,1);

%1-6-1 and 1-2-3-4-5-1
 Zcmp(79)= Z(1,6)+ Z(6,1) + Z(1,2) + Z(2,3) + Z(3,4) + Z(4,5) + Z(5,1);
 
%1-6-1 and 1-2-4-3-5-1
 Zcmp(80)= Z(1,6)+ Z(6,1) + Z(1,2) + Z(2,4) + Z(4,3) + Z(3,5) + Z(5,1); 
 
%1-6-1 and 1-3-2-4-5-1
 Zcmp(81)= Z(1,6)+ Z(6,1) + Z(1,3) + Z(3,2) + Z(2,4) + Z(4,5) + Z(5,1);
 
%1-6-1 and 1-3-4-2-5-1
 Zcmp(82)= Z(1,6)+ Z(6,1) + Z(1,3) + Z(3,4) + Z(4,2) + Z(2,5) + Z(5,1);
 
%1-6-1 and 1-4-2-3-5-1
 Zcmp(83)= Z(1,6)+ Z(6,1) + Z(1,4) + Z(4,2) + Z(2,3) + Z(3,5) + Z(5,1);
 
%1-6-1 and 1-4-3-2-5-1
 Zcmp(84)= Z(1,6)+ Z(6,1) + Z(1,4) + Z(4,3) + Z(3,2) + Z(2,5) + Z(5,1);
 
%1-6-1 and 1-2-3-5-4-1
 Zcmp(85)= Z(1,6)+ Z(6,1) + Z(1,2) + Z(2,3) + Z(3,5) + Z(5,4) + Z(4,1); 
 
%1-6-1 and 1-2-5-3-4-1

 Zcmp(86)= Z(1,6)+ Z(6,1) + Z(1,2) + Z(2,5) + Z(5,3) + Z(3,4) + Z(4,1); 
 
%1-6-1 and 1-3-2-5-4-1
 Zcmp(87)= Z(1,6)+ Z(6,1) + Z(1,3) + Z(3,2) + Z(2,5) + Z(5,4) + Z(4,1);
 
%1-6-1 and 1-3-5-2-4-1
 Zcmp(88)= Z(1,6)+ Z(6,1) + Z(1,3) + Z(3,5) + Z(5,2) + Z(2,4) + Z(4,1);
 
%1-6-1 and 1-2-4-5-3-1
 Zcmp(89)= Z(1,6)+ Z(6,1) + Z(1,2) + Z(2,4) + Z(4,5) + Z(5,3) + Z(3,1);
 
%1-6-1 and 1-2-5-4-3-1
Zcmp(90)= Z(1,6)+ Z(6,1) + Z(1,2) + Z(2,5) + Z(5,4) + Z(4,3) + Z(3,1);


[M,I] = min(Zcmp);

%% here the combonation generating Zmin is 60 which corresponds to 1-4-1,
%1-5-3-2-6-1 combination 



